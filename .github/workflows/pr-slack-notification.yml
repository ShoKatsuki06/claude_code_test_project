name: Pull Request Slack Notification

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  notify-slack:
    runs-on: ubuntu-latest
    
    steps:
      - name: Send Slack notification
        uses: rtCamp/action-slack-notify@v2
        env:
          SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK_URL }}
          SLACK_CHANNEL: 'claude_code_notification'
          SLACK_COLOR: ${{ github.event.action == 'opened' && 'good' || 'warning' }}
          SLACK_MESSAGE: |
            ${{ github.event.action == 'opened' && 'ğŸ”” æ–°ã—ã„ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒä½œæˆã•ã‚Œã¾ã—ãŸ' || 'ğŸ“ ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ' }}
            
            **ãƒªãƒã‚¸ãƒˆãƒª:** ${{ github.repository }}
            **ä½œæˆè€…:** ${{ github.event.pull_request.user.login }}
            **ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:** ${{ github.event.pull_request.title }}
            **ãƒ–ãƒ©ãƒ³ãƒ:** ${{ github.event.pull_request.head.ref }} â†’ ${{ github.event.pull_request.base.ref }}
            **URL:** ${{ github.event.pull_request.html_url }}
          SLACK_TITLE: "Pull Request ${{ github.event.action == 'opened' && 'Created' || 'Updated' }}"
          SLACK_USERNAME: 'GitHub Actions'
          SLACK_FOOTER: 'Powered by GitHub Actions'